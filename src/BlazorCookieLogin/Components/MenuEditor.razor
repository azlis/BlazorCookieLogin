@using BlazorCookieLogin.Entity;

<div class="row g-3 form-inline">
    <div class="col-12 col-sm-6 col-md-6">
        <BootstrapInput @bind-Value="Value.Seq" DisplayText="排序" ShowLabel="true"></BootstrapInput>
    </div>
    <div class="col-12 col-sm-6 col-md-6">
        <BootstrapInput @bind-Value="Value.Name" DisplayText="菜单名称" ShowLabel="true"></BootstrapInput>
    </div>
    <div class="col-12 col-sm-6 col-md-6">
        <label class="form-label">菜单图标</label>
        <BootstrapInputGroup>
            <BootstrapInput @bind-Value="Value.Icon"></BootstrapInput>
            <Button Icon="fa-solid fa-xmark" Color="Color.Secondary" OnClick="OnClearIcon"></Button>
            <Button Icon="fa-solid fa-bars" OnClick="OnToggleIconDialog"></Button>
        </BootstrapInputGroup>
    </div>
    <div class="col-12">
        <BootstrapInput @bind-Value="Value.Url"></BootstrapInput>
    </div>
    <div class="col-12 col-sm-6 col-md-6">
        <BootstrapInput @bind-Value="Value.ParentId" DisplayText="父级菜单" ShowLabel="true"></BootstrapInput>
    </div>
</div>

<MenuIconList @bind-Value="Value.Icon" @bind-Open="_showIconDialog" />

@code {
    [Parameter]
    [EditorRequired]
    [NotNull]
    public TestMenu? Value { get; set; }

    [Parameter]
    [EditorRequired]
    [NotNull]
    public List<SelectedItem>? ParementMenus { get; set; }

    [Parameter]
    [EditorRequired]
    [NotNull]
    public List<SelectedItem>? Targets { get; set; }

    [Parameter]
    [EditorRequired]
    [NotNull]
    public List<SelectedItem>? Apps { get; set; }

    private bool _showIconDialog;

    private void OnToggleIconDialog()
    {
        _showIconDialog = true;
    }

    private Task OnClearIcon()
    {
        Value.Icon = null;
        return Task.CompletedTask;
    }
}